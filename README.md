# EMQX's document generation

This repo is to hold the generated schema artificats which are used as
the source for documentation rendering.

Based on the schema doc, examples are generated by OpenAI.

See the render results here: https://zmstone.github.io/emqx-docgen

## Prerequisites

- Erlang/OTP 25.0 or later
- Elixir 1.15.0 or later
- Python 3.6 or later

## How to update

After a new EMQX version 5.x.y is released, execute `gen.sh <version>` to update the content of this repo.

For example, to update the content for `e5.9.0`, execute:

```bash
./gen e5.9.0 --rebuild
env OPENAI_API_KEY=MYKEY uv run ./generate-examples.py ./docs/en/e5.9.0.json
```

The generated content will be placed in the `docs/{en,zh}/v5.0.20.json`

## Background

The main user interfaces to configure and manage EMQX are

- HTTP API (and on top of it, the web-based dashboard)
- Configuration files
- Command line interface

Starting from version 5, HTTP API and Configuration are developed with
a unified schema to avoid repeating ourselves in:

- Input validation and translation
- Objects and fields documentation

## What is this repo for

For documentation, since the underlying schema is shared,
it is possible to auto-generate them.
E.g. the types and descriptions of the objects and fileds.

This repo, is created to record the full schema dump and the generated html doc for each EMQX version starting from v5.0.20.
